(self.webpackChunkblossom_flex_ui=self.webpackChunkblossom_flex_ui||[]).push([[894],{78474:function(){},86821:function(e,t,n){n.r(t),n.d(t,{ESSAdapter:function(){return b},GoogleAdapter:function(){return A},PlacesServiceStatus:function(){return a},TypeaheadLocationType:function(){return I},TypeaheadMenu:function(){return ue},TypeaheadRenderType:function(){return le},UitkTypeahead:function(){return ge},UitkTypeaheadAttribution:function(){return O},UitkTypeaheadDialog:function(){return ae},UitkTypeaheadInput:function(){return L},UitkTypeaheadMenu:function(){return ce},UitkTypeaheadResultItem:function(){return k},UitkTypeaheadResultTitle:function(){return z},UitkTypeaheadResults:function(){return Y},filterTypeaheadResults:function(){return C},getSizeOfTypeaheadResults:function(){return E},selectTypeaheadResultIndex:function(){return D}});var a,i=n(70655),s=n(67294),o=n(36326),r=n(68163),l=n(42157),u=n(98964),c=n(78474),h=n.n(c),d=n(29892),p=n(18242),g=n(22570),m=n(72933),f=n(14384),y=n(16480),v=n(13413),T=n(8315),R=n(70982);!function(e){e.INVALID_REQUEST="INVALID_REQUEST",e.OK="OK",e.OVER_QUERY_LIMIT="OVER_QUERY_LIMIT",e.REQUEST_DENIED="REQUEST_DENIED",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.ZERO_RESULTS="ZERO_RESULTS"}(a||(a={}));var I,S,A=function(){function e(e,t){var n=this,a="//maps.googleapis.com/maps/api/js?client=gme-expedia&channel=ess&libraries=places&language="+e+"&key="+t;r.W.getScript(a).then((function(){n.google=window.google,n.initGooglePlacesService()})).catch((function(e){console.error(e)}))}return e.getInstance=function(t,n){var a=t||"en_US",i=n||"AIzaSyABOFQNLMiTVN0AG3eWNmspVfVC8gNda68";return a in this.instances||(this.instances[a]=new e(a,i)),this.instances[a]},e.prototype.initGooglePlacesService=function(){if(this.google&&this.google.maps&&this.google.maps.places){var e=this.google.maps.places.AutocompleteService;this.googleAutoCompleteService=new e}},e.prototype.fetchResults=function(e){var t=this,n={input:e.q,type:"ADDRESS_AUTOCOMPLETE"===e.rc?["geocode"]:void 0};return new Promise((function(i){t.googleAutoCompleteService?t.googleAutoCompleteService.getPlacePredictions(n,(function(n,s){if(s===a.OK){var o=(r=t.handleGoogleResponse(n),{q:e.q,rc:e.rc,rid:e.rid,sr:r});i(o)}else i(e);var r})):i(e)}))},e.prototype.handleGoogleResponse=function(e){var t=[];return e.forEach((function(e,n){var a=e.description,i="",s="",o=(a||"").split(",");o.length<2?i=o[0].trim():(i=o[0],s=o.slice(1).map((function(e){return e.trim()})).join(", ").trim());var r={category:"GOOGLEMAPS",coordinates:void 0,index:n,regionNames:{displayName:a,fullName:e.description,lastSearchName:e.description,primaryDisplayName:i,secondaryDisplayName:s},sourceId:e.place_id,sourceName:"GPA",type:"ADDRESS"};t.push(r)})),t},e.instances={},e}();!function(e){e.HOTEL="HOTEL",e.AIRPORT="AIRPORT",e.MULTICITY="MULTICITY",e.POI="POI",e.METROCODE="METROCODE",e.METROSTATION="METROSTATION",e.TRAINSTATION="TRAINSTATION",e.ADDRESS="ADDRESS",e.NEIGHBORHOOD="NEIGHBORHOOD",e.CURRENT_LOCATION="CURRENT_LOCATION"}(I||(I={})),function(e){e.GOOGLE="google",e.CONSISTENT_DISPLAY="consistent_display"}(S||(S={}));var b=function(){function e(e){this.viewSize=0,this.isGeoLocationAllowed=!0,this.config=e,this.config.getDevice=this.getDevice,e.essLogger&&this.initLoggers(e.essLogger)}return e.prototype.setTypeaheadCategories=function(){var e=this.l10n.formatText;this.ESSCategories={ADDRESS:e("typeahead.ess.address"),AIRPORT:e("typeahead.ess.airport"),ATTRACTION:e("typeahead.ess.attraction"),CITY:e("typeahead.ess.city"),HOTEL:e("typeahead.ess.hotel"),METROCODE:e("typeahead.ess.city"),METROSTATION:e("typeahead.ess.metroStation"),MULTICITY:e("typeahead.ess.city"),MULTIREGION:e("typeahead.ess.city"),NEIGHBORHOOD:e("typeahead.ess.city"),POI:e("typeahead.ess.attraction"),TRAINSTATION:e("typeahead.ess.trainStation")}},e.prototype.getTypeaheadCategories=function(){return this.ESSCategories},e.prototype.addToESSCategories=function(e){this.ESSCategories=(0,i.pi)((0,i.pi)({},this.ESSCategories),e)},e.prototype.setL10n=function(e){this.l10n=e},e.prototype.initLoggers=function(e){var t=(0,i.pi)({},this.config);delete t.essLogger,e.initLogger(t)},e.prototype.constructURL=function(e,t){var n=this,a=this.config.domain?this.config.domain:"";(a=a.endsWith("/")?a:a+"/").endsWith("/")&&(a=a.slice(0,-1));var s=function(){switch(n.config.domainId){case"AIRLINE":return a+"/api/v2/suggest";default:return a+"/api/v4/typeahead"}}(),o=function(e){return Object.entries(e).map((function(e){var t=e[0],n=e[1];return t+"="+encodeURIComponent(n)})).join("&")};if(void 0!==this.config.browser&&null!==this.config.browser||(this.config.browser=this.getBrowser(window.navigator.userAgent)),void 0!==this.config.device&&null!==this.config.device||(this.config.device=this.getDevice(window.navigator.userAgent)),"AIRLINE"===this.config.domainId)return s+"?query="+e+"&"+o({domainId:this.config.domainId,lob:this.config.lob,maxResults:this.config.maxResults,siteid:this.config.siteId,locale:this.config.locale});var r=(0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)({browser:this.config.browser,client:this.config.client,dest:this.config.dest,device:this.config.device,expuserid:this.config.expuserid?this.config.expuserid:-1,features:this.config.features,format:"json",guid:this.config.guid,lob:this.config.lob,locale:this.config.locale,maxresults:this.config.maxResults,personalize:!!this.config.personalize&&this.config.personalize},this.config.regionId?{rid:this.config.regionId}:{}),{regiontype:this.config.regionType,siteid:this.config.siteId}),this.config.packageType?{pt:this.config.packageType}:{}),this.config.latLong?{latlong:this.config.latLong}:{}),this.config.lastSearchRegionId?{lsrid:this.config.lastSearchRegionId}:{}),this.config.lastSearchTimestamp?{lstime:this.config.lastSearchTimestamp}:{}),this.config.lastSearchLatLong?{lslatlong:this.config.lastSearchLatLong}:{}),this.config.lastSearchElapseTime?{lsetime:this.config.lastSearchElapseTime}:{}),this.config.googleApiKey?{googleApiKey:this.config.googleApiKey}:{}),this.config.alternate&&t?{alternate:!0}:{}),this.config.debounceVariant?{ab:this.config.debounceVariant}:{}),this.config.trending?{trending:this.config.trending}:{}),this.config.alternateSecondVariant?{alternateSecondVariant:this.config.alternateSecondVariant}:{});return""===e?s+"/?"+o(r):s+"/"+e+"?"+o(r)},e.prototype.fetchResponse=function(e,t){var n=this,a=this.config&&this.config.personalize;return""===e&&a||""!==e?(this.config.essLogger&&this.config.essLogger.logTypeaheadRequest(e),fetch(this.constructURL(e,t),{method:"AIRLINE"===this.config.domainId?"POST":"GET"}).then((function(e){return n.config.essLogger&&n.config.essLogger.logResponse(e),e.json()}))):Promise.resolve([])},e.prototype.fetchResults=function(e,t){var n=this;this.config.essLogger&&this.config.essLogger.initLogger(this.config);var a=t?"":e;return this.fetchResponse(a,t).then((function(e){return n.handleEssResponse(e)})).then((function(e){return n.logResponse(e)})).then((function(e){return n.adaptResponseToTypeaheadResults(e,a,n.config.historyDetail)})).then((function(e){return n.categorizeOnFocusResponse(e,t)}))},e.prototype.fetchRecentSearchResults=function(){return this.fetchResults("")},e.prototype.fetchAlternativeResults=function(e){return this.fetchResults(e,this.config.alternate)},e.prototype.fetchResultsCategorized=function(e){var t=this;return this.config.essLogger&&this.config.essLogger.initLogger(this.config),this.fetchResponse(e).then((function(e){return t.handleEssResponse(e)})).then((function(e){return t.logResponse(e)})).then((function(n){return t.adaptResponseToTypeaheadResults(n,e,t.config.historyDetail)})).then((function(e){return t.categorizeResponse(e)}))},e.prototype.fetchRecentSearchResultsCategorized=function(){return this.fetchResultsCategorized("")},e.prototype.categorizeResponse=function(e){var t=this,n=new Map,a=[],i=0;if(e&&e.length>0){e.forEach((function(e){var a,i=(null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.type)?t.ESSCategories[e.data.type]:"";n[i]||(n[i]=[]),n[i].push(e)}));for(var s=0,o=Object.entries(n);s<o.length;s++){var r=o[s],l=r[0],u=r[1];u.forEach((function(e){e.data.index=i,i++}));var c={heading:l,typeaheadResults:u};a.push(c)}}return a},e.prototype.onFocusCategories=function(){var e=this.l10n.formatText;return(0,i.pi)({CURRENTLOCATION:"",POPULAR:e("typeahead.ess.popular")||"Explore popular destinations"},this.config.alternateSecondVariant?{USERHISTORY:e("typeahead.ess.history")||"Recent searches",ALTERNATE:e("typeahead.ess.alternate")||"People also searched"}:{ALTERNATE:e("typeahead.ess.alternate")||"People also searched",USERHISTORY:e("typeahead.ess.history")||"Recent searches"})},e.prototype.categorizeOnFocusResponse=function(e,t){if(e&&e.length>0){var n=e[0];if("ALTERNATE"===n.data.category||"CURRENTLOCATION"===n.data.category||"POPULAR"===n.data.category||"USERHISTORY"===n.data.category&&this.config.alternate&&t){var a=new Map,i=[],s=this.onFocusCategories(),o=0;e.forEach((function(e){if(e.data.category){var t=e.data.category;a[t]||(a[t]=[]),a[t].push(e)}}));for(var r=0,l=Object.entries(s);r<l.length;r++){var u=l[r],c=u[0],h=u[1],d=a[c];if(d&&d.length>0){d.forEach((function(e){e.data.index=o,e.data.displayType="CATEGORIZED",o+=1}));var p={heading:h,typeaheadResults:d};i.push(p)}}return(t||this.config.showCurrentLocation)&&(this.response.sr=i.flatMap((function(e){return e.typeaheadResults.map((function(e){return e.data}))})),this.config.essLogger&&this.config.essLogger.logTypeaheadResponse(this.response)),i}}return e},e.prototype.logSuggestionShown=function(e){this.config.essLogger&&this.config.essLogger.logSuggestionShown(e)},e.prototype.onItemSelection=function(e){var t,n=this;if(null===(t=this.config.essLogger)||void 0===t||t.logSuggestionSelected(e),(null==e?void 0:e.type)===I.CURRENT_LOCATION){if(this.isGeoLocationAllowed)return this.readCurrentLocation().then((function(t){var n=t.coords,a=n.latitude,s=n.longitude;return(0,i.pi)((0,i.pi)({},e),{location:{lat:a.toFixed(5),long:s.toFixed(5)}})})).catch((function(e){throw n.isGeoLocationAllowed=!1,e}));var a=this.l10n.formatText("typeahead.currentLocation.blocked.message");return window.alert(a),Promise.reject(a)}return Promise.resolve(e)},e.prototype.readCurrentLocation=function(){return new Promise((function(e,t){window.navigator.geolocation.getCurrentPosition(e,t)}))},e.prototype.typeaheadDialogOpened=function(e){if(this.config.essLogger){var t=e&&""!==e?e:void 0;this.config.essLogger.logTypeaheadOpen(t)}},e.prototype.logTypeaheadDismiss=function(){this.config.essLogger&&this.config.essLogger.logTypeaheadBlurEvent()},e.prototype.handleEssResponse=function(e){return e.sr=e.sr||e.suggestions||[],!this.googleAdapter&&this.config.features.split("|").indexOf(S.GOOGLE)>=0&&(this.googleAdapter=A.getInstance(this.config.locale,this.config.googleApiKey)),!this.googleAdapter||"GOOGLE_AUTOCOMPLETE"!==e.rc&&"ADDRESS_AUTOCOMPLETE"!==e.rc?Promise.resolve(e):this.googleAdapter.fetchResults(e)},e.prototype.logResponse=function(e){return this.config.essLogger&&this.config.essLogger.logTypeaheadResponse(e),this.response=e,Promise.resolve(e)},e.prototype.adaptResponseToTypeaheadResults=function(e,t,n){var a,s,o=this,r=function(e){var a,i,s,r,l,u=function(e,a){var i;if("USERHISTORY"===e&&n&&void 0!==o.l10n&&a&&a.searchDetail&&a.searchDetail.startDate&&a.searchDetail.endDate&&a.searchDetail.lob&&!t){var s=a.searchDetail,r=o.l10n,l=r.formatDateString,u=r.formatText,c=new Date(s.startDate),h=6e4*c.getTimezoneOffset(),d=l(new Date(c.getTime()+h),{skeleton:"MMMd"}),p=new Date(s.endDate),g=6e4*p.getTimezoneOffset(),m=l(new Date(p.getTime()+g),{skeleton:"MMMd"}),f=u("datePicker.nightSummary",(Number(s.endDate)-Number(s.startDate))/864e5),y=s.roomCount,v=s.lob;i=1===y&&"Lodging"===v?d+" - "+m+" | "+f+" | "+u("typeahead.recentHistory.roomsTravelers",y,Number(a.searchDetail.totalTravelerCount)):y>1?d+" - "+m+" | "+f:d+" - "+m}return i}(e.category,e);if(o.config.features.indexOf(S.CONSISTENT_DISPLAY)<0)return{primaryText:(null===(a=e.regionNames)||void 0===a?void 0:a.displayName)||(null===(i=e.names)||void 0===i?void 0:i.displayName),subtext:u};var c=(null===(s=e.regionNames)||void 0===s?void 0:s.primaryDisplayName)||(null===(r=e.names)||void 0===r?void 0:r.displayName);return u?{primaryText:"<strong>"+c+"</strong>",subtext:u}:{primaryText:"<strong>"+c+"</strong>",subtext:(null===(l=e.regionNames)||void 0===l?void 0:l.secondaryDisplayName)||""}},l=function(e,t,n,a,i){if("AIRLINE"===e)return"";if(n&&!a)return"subdirectory_arrow_right";if("USERHISTORY"===i)return"history";if("FLIGHTS"===o.config.lob)return"lob_flights";switch(e){case"HOTEL":return"lob_hotels";case"AIRPORT":return"lob_flights";case"ADDRESS":return"RENTALLOCATION"===t?"lob_cars":"place";case"METROSTATION":case"TRAINSTATION":return"train";default:return"place"}},u=function(e,n,a){var s,u,c,h,d,p,g,m,f,y=n.hierarchyInfo&&n.hierarchyInfo.relation&&n.hierarchyInfo.relation.indexOf("nearby")>-1,v=n.hierarchyInfo&&n.hierarchyInfo.relation&&n.hierarchyInfo.relation.indexOf("child")>-1||y,T=r(n),R=T.primaryText,I=T.subtext,S=(0,i.pi)((0,i.pi)({data:(0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)({},n.category?{category:n.category}:{}),!t&&n.searchDetail?{searchDetail:n.searchDetail}:{}),n.userHistoryType?{userHistoryType:n.userHistoryType}:{}),(null===(s=n.ids)||void 0===s?void 0:s.id)?{id:n.ids.id}:{}),n.coordinates?{location:{lat:n.coordinates.lat,long:n.coordinates.long}}:{}),n.regionId?{regionId:n.regionId}:n.gaiaId?{regionId:n.gaiaId}:{}),n.cityId?{cityId:n.cityId}:{}),n.regionNames?{regionNames:n.regionNames}:{}),n.type?{type:n.type}:{}),n.subtype?{subtype:n.subtype}:{}),n.hotelId?{selected:n.hotelId}:{}),n.hierarchyInfo?{hierarchyInfo:n.hierarchyInfo}:{}),n.essId?{essId:{sourceId:n.essId.sourceId,sourceName:n.essId.sourceName}}:{}),{dest:o.config.dest}),{index:a+1}),icon:l(n.type||n.domainId,n.subtype,v,y,n.category)},v?{isChild:!0}:{}),{name:R,subtext:I,title:(null===(u=n.regionNames)||void 0===u?void 0:u.lastSearchName)||(null===(c=n.regionNames)||void 0===c?void 0:c.shortName)||(null===(h=n.regionNames)||void 0===h?void 0:h.fullName)||(null===(d=n.ids)||void 0===d?void 0:d.id),value:(null===(p=n.regionNames)||void 0===p?void 0:p.lastSearchName)||(null===(g=n.regionNames)||void 0===g?void 0:g.shortName)||(null===(m=n.regionNames)||void 0===m?void 0:m.fullName)||(null===(f=n.names)||void 0===f?void 0:f.displayName)});return e.push(S),e},c=""===t&&this.shouldShowCurrentLocation()?[this.getCurrentLocationItem()]:[];return(null===(s=null===(a=e.sr)||void 0===a?void 0:a.reduce)||void 0===s?void 0:s.call(a,u,c))||c},e.prototype.shouldShowCurrentLocation=function(){return Boolean(this.config.showCurrentLocation&&"geolocation"in navigator)},e.prototype.getCurrentLocationItem=function(){var e=this.isGeoLocationAllowed?this.l10n.formatText("typeahead.currentLocation.available.item"):this.l10n.formatText("typeahead.currentLocation.blocked.item");return{data:{category:"CURRENTLOCATION",hierarchyInfo:{relation:["current"]},index:-1,enabled:this.isGeoLocationAllowed,regionNames:{fullName:"CurrentLocation"},type:I.CURRENT_LOCATION},icon:"my_location",name:e,title:e,value:e}},e.prototype.getBrowser=function(e){var t,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE":"Chrome"===n[1]&&null!==(t=e.match(/\b(OPR|Edge?)\/(\d+)/))?t.slice(1,-1).join(" ").replace("OPR","Opera").replace("Edg ","Edge "):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),n[0])},e.prototype.getDevice=function(e){return/iPad|Transformer|ME173X|KOOF|Nook|IMM76D|Nexus 10|Nexus 7|Tablet/i.test(e)||/HP Slate|PG09410|PG41200|Mediapad|Kindle|Tab|Xoom|TegraNote|SCH-I800/i.test(e)?"Tablet":/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)?"Mobile":"Desktop"},e}(),E=function(e){switch(e.type){case"categorized":return e.items.reduce((function(e,t){return e+t.typeaheadResults.length}),0);case"uncategorized":return e.items.length}},C=function(e,t){switch(e.type){case"categorized":return(0,i.pi)((0,i.pi)({},e),{items:e.items.map((function(e){return(0,i.pi)((0,i.pi)({},e),{typeaheadResults:e.typeaheadResults.filter((function(e){return!t.includes(e.value)}))})}))});case"uncategorized":return(0,i.pi)((0,i.pi)({},e),{items:e.items.filter((function(e){return!t.includes(e.value)}))})}},D=function(e,t){switch(e.type){case"categorized":return e.items.reduce((function(e,t){return e.push.apply(e,t.typeaheadResults),e}),[])[t];case"uncategorized":return e.items[t]}},N=l.A.bind(h()),L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.placeholder,a=(0,i._T)(e,["className","placeholder"]),r=N("uitk-typeahead-input",t);return s.createElement(o.n,(0,i.pi)({},a,{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",className:r,type:"text",spellCheck:!1,placeholder:n}))},t.displayName="UitkTypeaheadInput",t}(s.Component),w=l.A.bind(h()),O=function(e){var t=e.results,n=function(e){return e.some((function(e){var t="category";return e.data&&e.data[t]&&"GOOGLEMAPS"===e.data[t]}))};return function(e){switch(e.type){case"categorized":return function(e){return e.some((function(e){return n(e.typeaheadResults)}))}(e.items);case"uncategorized":return function(e){return n(e)}(e.items)}}(t)?s.createElement("div",{className:w("uitk-typeahead-google-logo")},s.createElement("img",{src:"data:image/png;base64,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",alt:"Powered by Google Logo"})):null},x=l.A.bind(h()),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),t.prototype.render=function(){var e=this.props.className;return s.createElement(v.AE,(0,i.pi)({},this.props,{className:x("uitk-button-typeahead","uitk-type-left",e),isFullWidth:!0}))},t.displayName="UitkTypeaheadButton",t}(s.Component),P=l.A.bind(h()),k=function(e){function t(t){var n=e.call(this,t)||this;return n.handleClick=n.handleClick.bind(n),n}return(0,i.ZT)(t,e),t.prototype.handleClick=function(){var e=this.props,t=e.data;(0,e.onResultItemSelect)(e.value,t)},t.prototype.render=function(){var e,t,n,a,i=this.props,o=i.activeSuggestion,r=i.className,l=i.disabled,c=i.icon,h=i.index,d=i.name,p=i.stid,m=i.sanitized,f=i.subtext,v=P(r,f?"uitk-typeahead-result-item has-subtext":"uitk-typeahead-result-item",!0===o&&"uitk-typeahead-result-item-hover");if(!0===o){var T=d.replace(/(<([^>]+)>)/gi,"");(0,u.P)(""+T)}return l?n=s.createElement(y.H,null):m?n=s.createElement("span",null,d):(n=s.createElement("div",{className:P("truncate")},s.createElement("span",{dangerouslySetInnerHTML:{__html:d}})),f&&(a=s.createElement("div",{className:P("is-subText","truncate"),dangerouslySetInnerHTML:{__html:f}}))),!l&&c&&(t=s.createElement(g.fR,{name:c,size:g.eZ.SMALL})),e=f?(d+" "+f).replace(/(<([^>]+)>)/gi,""):d.replace(/(<([^>]+)>)/gi,""),s.createElement("li",{className:v,"data-stid":p&&p+"-result-item","data-index":h},s.createElement(M,{"data-stid":p&&p+"-result-item-button",disabled:l,onClick:this.handleClick,className:P(f&&"has-subtext"),"aria-label":e},t,s.createElement("div",{className:P("uitk-typeahead-button-label","truncate")},n,a)))},t.displayName="UitkTypeaheadResultItem",t}(s.Component),U=l.A.bind(h());function z(e){var t=e.name;return s.createElement("div",{className:U("uitk-typeahead-result-title-label","truncate")},t)}var K=l.A.bind(h());function G(e){var t=e.headingText,n=e.hideHeading,a=void 0!==n&&n,i=e.typeaheadLabel,o=e.stid,r=void 0===o?"":o,l=e.values,c=void 0===l?[]:l,h=e.onItemRemove,p=void 0===h?function(){}:h,g=e.onClear,m=void 0===g?function(){}:g,f=e.clearAllText,y=e.className,I=(0,d.useLocalization)(),S=null!=f?f:I.formatText("typeahead.mulselect.clearAll"),A=null!=t?t:I.formatText("typeahead.multiselect.selectedItemHeading");return s.createElement("div",{className:K("uitk-typeahead-selections",y)},!a&&A&&c.length>0?s.createElement(z,{name:A}):null,s.createElement("div",{className:K("uitk-typeahead-pills"),"data-stid":r},c.map((function(e,t){return s.createElement(R.pm,{onClick:function(){return function(e,t){(0,u.P)(I.formatText("typeahead.removeSelection",e)),p(t)}(e,t)},id:r+"-pill-"+t,key:r+"-pill-"+t,className:K("uitk-spacing-margin-block-one")},e)})),c.length?s.createElement(T.m,{onClick:function(){(0,u.P)(I.formatText("typeahead.clearAllSelections",i)),m()},size:v.xY.SMALL},S):null))}var H=l.A.bind(h()),B=function(e){var t=e&&e.data&&e.data.type===I.CURRENT_LOCATION;return H({"is-child":e.data&&e.isChild,"uitk-typeahead-current-location":t&&e.data.enabled,disabled:t&&!e.data.enabled})};function Y(e){var t=e.activeSuggestion,n=e.allowExactMatch,a=e.listTitle,i=e.typeaheadLabel,o=e.onResultItemSelect,r=e.results,l=e.searchTerm,u=e.stid,c=e.emptyResultPlaceholder,h=e.isMulti,y=e.onClearAll,v=e.onItemRemove,T=e.clearAllText,R=e.selectedItemHeading,I=e.value,S=e.domRef,A=(0,d.useLocalization)(),b=h?C(r,I):r,D=E(b),N=h?"uitk-typeahead-multi-selection-results":"uitk-typeahead-results",L=function(){return h?s.createElement(G,{typeaheadLabel:i,values:I,stid:u,clearAllText:T,onClear:y,onItemRemove:v,headingText:R,className:H("uitk-typeahead-results-selections")}):null};if(!r||0===r.items.length)return c?s.createElement(s.Fragment,null,L(),s.createElement(f.l,{margin:{block:"six"}},s.createElement(p.v,{justifyContent:"center",alignContent:"center",className:H("uitk-typeahead-empty-state")},s.createElement(m.bc,{align:"center"},s.createElement(f.l,{margin:{blockend:"four"}},s.createElement(g.fR,{name:"search",size:g.eZ.XLARGE})),s.createElement(f.l,{margin:{blockend:"three"}},s.createElement(m.bc,{size:300},c," ")))))):L();function w(e,t){o(e,t,b)}return s.createElement("div",{className:H(N),ref:S},L(),s.createElement("ul",{className:H("no-bullet"),"data-stid":u&&u+"-results"},function(e){switch(e.type){case"categorized":return(i=e.items)&&i.map((function(e){return s.createElement(s.Fragment,{key:e.heading},e.heading&&s.createElement("li",{className:H("uitk-typeahead-result-title")},s.createElement(z,{name:e.heading})),e.typeaheadResults&&e.typeaheadResults.map((function(e,n){var a;return s.createElement(k,{className:B(e),data:e.data,disabled:e.disabled,key:n,index:n,icon:e.icon,name:e.name,onResultItemSelect:w,stid:u,value:e.value,subtext:e.subtext,activeSuggestion:-1!==t&&t===(null===(a=e.data)||void 0===a?void 0:a.index)})})))}));case"uncategorized":return(n=e.items)&&n.map((function(e,n){return s.createElement(s.Fragment,{key:n},a&&s.createElement("li",{className:H("uitk-typeahead-result-title")},s.createElement(z,{name:e.title})),s.createElement(k,{className:B(e),data:e.data,disabled:e.disabled,key:n,index:n,icon:e.icon,name:e.name,onResultItemSelect:w,stid:u,value:e.value,subtext:e.subtext,activeSuggestion:-1!==t&&t===n}))}))}var n,i}(b),n&&l&&s.createElement(k,{icon:"search",name:A.formatText("typeahead.searchFor",[l]),onResultItemSelect:w,index:D,stid:u,value:l,sanitized:!0,activeSuggestion:!(-1===t||t!==D)})),s.createElement(O,{results:b}))}var W,V=n(25570),F=n(68369),Q=n(54552),Z=n(86146),j=n(71970),J=n(57861),_=n(3774),q=n(80463),X=n(64366),$=n(10174),ee=l.A.bind(h());!function(e){e.UP="UP",e.DOWN="DOWN"}(W||(W={}));var te,ne=function(e){function t(t){var n=e.call(this,t)||this;return n.dialogRef=s.createRef(),n.toolbarInputRef=s.createRef(),n.iphoneSafariUARegex=/iphone.*safari|safari.*iphone/gi,n.uid=Math.random().toString(36).substring(7),n.typeaheadDialogLiveAnnounceId="uitk-typeahead-dialog-live-announce-"+n.uid,n.typingTimeout=0,n.newAttr=-1,n._isMounted=!1,n.state={activeSuggestion:-1,categorizedResults:[],data:{},results:[],searchTerm:t.term,showResults:!0,startSearchTerm:t.startSearchTerm},n.announceResults=n.announceResults.bind(n),n.focusInput=n.focusInput.bind(n),n.handleChange=n.handleChange.bind(n),n.handleKeyPress=n.handleKeyPress.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.handleKeyUp=n.handleKeyUp.bind(n),n.handleAnnounceResults=n.handleAnnounceResults.bind(n),n.handleResultItemSelect=n.handleResultItemSelect.bind(n),n.onDismiss=n.onDismiss.bind(n),n.openDialog=n.openDialog.bind(n),n.updateResults=n.updateResults.bind(n),n.updateResultsDebounced=t.debounceRate&&t.debounceRate>0?(0,_.debounce)(t.debounceRate,n.updateResults):n.updateResults,n.updateInput=n.updateInput.bind(n),n.selectInput=n.selectInput.bind(n),n.resetActiveSuggestion=n.resetActiveSuggestion.bind(n),n.removeDialogLiveAnnounce=n.removeDialogLiveAnnounce.bind(n),n.contentRef=s.createRef(),n}return(0,i.ZT)(t,e),t.prototype.componentDidMount=function(){this._isMounted=!0},t.prototype.componentDidUpdate=function(e,n){var a=this.props.term;a!==e.term&&this.setState({searchTerm:a});var i=this.state,s=i.searchTerm,o=i.showResults;n.searchTerm!==s&&o&&(this.setState({results:t.placeholder}),this.updateResultsDebounced(s))},t.prototype.componentWillUnmount=function(){var e=this.props.adapter;e&&"function"==typeof e.logTypeaheadDismiss&&e.logTypeaheadDismiss(),this._isMounted=!1},t.prototype.handleChange=function(e){var t=this.props.onInputChange;this.setState({searchTerm:e.target.value,showResults:!0},this.focusInput),""===e.target.value&&this.resetActiveSuggestion(),t&&t(e)},t.prototype.handleResultItemSelect=function(e,t,n){var a,i=this,s=this.props,o=s.isMulti,r=s.adapter,l=s.l10n,c=s.label,h=s.onResultItemSelect,d=this.state.searchTerm;return null===(a=r.onItemSelection)||void 0===a?void 0:a.call(r,t).then((function(t){o?i.setState({activeSuggestion:-1}):i.setState({activeSuggestion:-1,searchTerm:e,showResults:!1}),h(e,t);var a=n?E(n)-1:0;o&&(0,u.P)(l.formatText("typeahead.announceResults.itemSelected",e)+"\n             "+l.formatText("typeahead.announceResults.showingResults",c,a,d),void 0,void 0,i.contentRef,i.typeaheadDialogLiveAnnounceId),o||(setTimeout((function(){(0,u.P)(l.formatText("typeahead.announceResults.itemSelected",e)+"\n             "+l.formatText("typeahead.announceResults.menuClosed"))}),100),i.onDismiss())})).catch((function(){i.updateResults(e,!0,""!==e)}))},t.prototype.handleAnnounceResults=function(e){var t=this;this.typingTimeout&&clearTimeout(this.typingTimeout),e.length>0&&(this.typingTimeout=setTimeout((function(){t.announceResults(e)}),1e3))},t.prototype.handleKeyPress=function(e){var t=this.props.value,n=C(this.getResultsToShow(),Array.isArray(t)?t:[]),a=this.state,i=a.activeSuggestion,s=a.searchTerm;if("Enter"!==e.key&&38!==e.keyCode&&40!==e.keyCode||e.preventDefault(),"Enter"===e.key){var o=D(n,i);o?this.handleResultItemSelect(o.value,o.data,n):this.handleResultItemSelect(s,void 0,n)}},t.prototype.handleActiveSuggestion=function(e){var t=this.state,n=t.activeSuggestion,a=t.results,i=t.searchTerm,s=this.props.allowExactMatch&&i?1:0,o=a.length+s,r=0;e===W.UP?r=-1===n?o:o-1:e===W.DOWN&&(r=o+1);var l=(n+r)%o,u=(this.newAttr+r)%o;this.setState({activeSuggestion:this.newAttr>-1?u:l}),this.newAttr=-1},t.prototype.handleUpArrowKey=function(e){38===e.keyCode&&this.handleActiveSuggestion(W.UP)},t.prototype.handleDownArrowKey=function(e){40===e.keyCode&&this.handleActiveSuggestion(W.DOWN)},t.prototype.handleTabKey=function(e){if(9===e.keyCode||e.shiftKey&&9===e.keyCode){var t=e.target.parentElement.getAttribute("data-index");this.newAttr=t?Number(t):-1}},t.prototype.handleEscKey=function(e){27===e.keyCode&&this.onDismiss()},t.prototype.handleKeyDown=function(e){this.handleDownArrowKey(e),this.handleUpArrowKey(e),this.handleEscKey(e)},t.prototype.handleKeyUp=function(e){this.handleTabKey(e)},t.prototype.onDismiss=function(){var e=this.props,t=e.onDismiss,n=e.isMulti,a=e.l10n;this.contentRef.current.scrollTop=0,t&&t(),this.resetActiveSuggestion(),this.setState({startSearchTerm:""}),n&&setTimeout((function(){(0,u.P)(a.formatText("typeahead.announceResults.menuClosed"))}),100),this.removeDialogLiveAnnounce()},t.prototype.getResultsToShow=function(){var e=this.props.categorize,t=this.state,n=t.categorizedResults,a=t.results;return e||n&&n.length?{items:n,type:"categorized"}:{items:a,type:"uncategorized"}},t.prototype.removeDialogLiveAnnounce=function(){var e,t=document.getElementById(this.typeaheadDialogLiveAnnounceId);t&&(null===(e=t.parentNode)||void 0===e||e.removeChild(t))},t.prototype.resetActiveSuggestion=function(){this.setState({activeSuggestion:-1})},t.prototype.updateInput=function(e,t){var n=this;this.setState({searchTerm:e},(function(){n.updateResults(e,!1,!!t),n.selectInput()}))},t.prototype.scrollTop=function(){navigator.userAgent.match(this.iphoneSafariUARegex)&&document.getElementsByTagName("html")[0].scrollTop>0&&document.getElementsByTagName("html")[0].scrollTo({top:0,behavior:"smooth"})},t.prototype.openDialog=function(){var e=this.state.searchTerm,t=this.props,n=t.adapter,a=t.startSearchTerm,i=t.defaultTerm;n.typeaheadDialogOpened(e),this.updateInput(e||i||a||"",""!==e),this.focusInput(),this.scrollTop()},t.prototype.selectInput=function(){var e=this.toolbarInputRef;e&&e.current&&"function"==typeof e.current.select&&e.current.select()},t.prototype.focusInput=function(){var e=this.toolbarInputRef;e&&e.current&&"function"==typeof e.current.focus&&e.current.focus()},t.prototype.announceResults=function(e){var t=this.state.searchTerm,n=this.props,a=n.l10n,i=n.label,s=n.defaultTerm,o=t&&t.split("");if(o){var r="'"+o.join("' , '")+" '";e&&(0,u.P)(a.formatText("typeahead.announceResults.resultsAvailable",r,e.length),void 0,void 0,this.contentRef,this.typeaheadDialogLiveAnnounceId)}else s&&e&&(0,u.P)(a.formatText("typeahead.announceResults.showingResultsDefault",i,e.length))},t.prototype.isCategorizedResult=function(e){return"heading"in e},t.prototype.updateResults=function(e,t,n){return(0,i.mG)(this,void 0,void 0,(function(){var a,s,o,r,l,u,c,h,d,p,g,m,f,y=this;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return a=this.props,s=a.adapter,o=a.categorize,r=a.defaultTerm,l=""===e?null!=r?r:"":e,this.lastSearchTerm=l,""===l||!0!==t?[3,5]:o?[4,Promise.all([s.fetchResultsCategorized(l),s.fetchRecentSearchResultsCategorized()])]:[3,2];case 1:return g=i.sent(),[3,4];case 2:return[4,Promise.all([s.fetchResults(l),s.fetchRecentSearchResults()])];case 3:g=i.sent(),i.label=4;case 4:return d=(h=g)[0],(p=h[1])&&p.length>0?o||this.isCategorizedResult(p[0])?c=p:u=p:o?c=d:u=d,[3,11];case 5:return o?[4,s.fetchResultsCategorized(l)]:[3,7];case 6:return c=i.sent(),[3,11];case 7:return""!==l&&n?[4,s.fetchAlternativeResults(l)]:[3,9];case 8:return(m=i.sent())&&m.length&&this.isCategorizedResult(m[0])?c=m:u=m,[3,11];case 9:return[4,s.fetchResults(l)];case 10:(m=i.sent())&&m.length&&this.isCategorizedResult(m[0])?c=m:u=m,i.label=11;case 11:return this.lastSearchTerm!==l||(u&&u.length&&this._isMounted?(s.logSuggestionShown(t||n?"":l,u),this.setState({results:u,categorizedResults:[]},(function(){y.handleAnnounceResults(u)}))):c&&c.length?(s.logSuggestionShown(t||n?"":l,c),f=c.reduce((function(e,t){return e.push.apply(e,t.typeaheadResults),e}),[]),this.setState({categorizedResults:c,results:f},(function(){y.handleAnnounceResults(c)}))):this._isMounted&&this.setState({results:[],categorizedResults:[]})),[2]}}))}))},t.prototype.render=function(){var e=this.props,t=e.allowExactMatch,n=e.dialog,a=e.id,i=e.listTitle,o=e.stid,r=e.placeholder,l=e.label,u=e.handleClear,c=e.emptyResultPlaceholder,h=e.isMulti,d=e.dismissButtonText,p=e.clearAllText,g=e.onClearAll,m=e.onItemRemove,f=e.selectedItemHeading,y=e.value,v=e.strictFullscreen,T=this.state,R=T.activeSuggestion,I=T.searchTerm,S=this.getResultsToShow();return s.createElement(J.NB,{animation:J.Wv.SLIDEUP,className:ee("uitk-typeahead-dialog"),dialogShow:n,openCallback:this.openDialog,strictFullscreen:v,theme:J.Ev.CANVAS},s.createElement($.bW,{className:ee("uitk-typeahead-input-wrapper"),navigationContent:{navIconLabel:"Close the dialog",onClick:this.onDismiss,navButtonId:a+"-close"}},s.createElement(L,{className:ee("uitk-typeahead-input-v2"),"data-stid":o&&o+"-dialog-input",domRef:this.toolbarInputRef,hasClearButton:I.length>0,hasFloatedLabel:!1,hasVisibleLabel:!1,id:o,label:l,onChange:this.handleChange,onKeyPress:this.handleKeyPress,placeholder:r,value:I,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,handleClear:u})),s.createElement(J.D$,{className:ee("uitk-typehead-dialog-content"),contentDomRef:this.contentRef},s.createElement(Y,{allowExactMatch:t,typeaheadLabel:l,onResultItemSelect:this.handleResultItemSelect,results:S,searchTerm:I,stid:o,listTitle:i,activeSuggestion:R,emptyResultPlaceholder:c,isMulti:h,dismissButtonText:d,selectedItemHeading:f,clearAllText:p,onClearAll:g,onItemRemove:m,value:y})),this.props.isMulti?s.createElement(X.oy,{type:X.kL.BUTTON},s.createElement(q.t,{onClick:this.onDismiss},d)):null)},t.placeholder=Array(5).fill({disabled:!0,icon:"brightness_1",name:" "}),t}(s.Component),ae=function(e){var t=(0,d.useLocalization)();return s.createElement(ne,(0,i.pi)({l10n:t},e))},ie=n(51796),se=n(70094),oe=l.A.bind(h()),re=function(e){return""===e||Array.isArray(e)&&0===e.length};!function(e){e.UP="UP",e.DOWN="DOWN"}(te||(te={}));var le,ue=function(e){function t(t){var n=e.call(this,t)||this;n.toolbarInputRef=s.createRef(),n.keyPressed=!1,n.newAttr=-1,n.typingTimeout=0;var a=n.props,i=a.dialog,o=a.term,r=a.debounceRate;return n.state={activeSuggestion:-1,categorizedResults:[],data:{},menu:i,results:[],searchTerm:o,showResults:!0},n.handleChange=n.handleChange.bind(n),n.handleKeyPress=n.handleKeyPress.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.handleKeyUp=n.handleKeyUp.bind(n),n.handleFocus=n.handleFocus.bind(n),n.handleResultItemSelect=n.handleResultItemSelect.bind(n),n.focusInput=n.focusInput.bind(n),n.announceResults=n.announceResults.bind(n),n.onDismiss=n.onDismiss.bind(n),n.updateResults=n.updateResults.bind(n),n.updateResultsDebounced=r&&r>0?(0,_.debounce)(r,n.updateResults):n.updateResults,n.menuOpened=n.menuOpened.bind(n),n.menuClosed=n.menuClosed.bind(n),n.resetActiveSuggestion=n.resetActiveSuggestion.bind(n),n.resultsDomRef=s.createRef(),n}return(0,i.ZT)(t,e),t.prototype.componentDidUpdate=function(e,n){var a=this.state,i=a.searchTerm,s=a.results,o=a.showResults,r=this.props,l=r.label,c=r.l10n,h=r.value,d=r.defaultTerm,p=s&&s.length,g=this.isTypeAheadFocused();re(h)&&re(i)&&g&&!d&&(0,u.P)(c.formatText("typeahead.announceResults.trigerLabel",l)),n.searchTerm===i&&!re(h)&&!1===this.keyPressed&&g&&(0,u.P)(c.formatText("typeahead.announceResults.showingResults",l,p,i)),n.searchTerm!==i&&o&&(this.setState({results:t.placeholder}),this.updateResultsDebounced(i)),this.focusInput()},t.prototype.handleFocus=function(){this.selectInput()},t.prototype.handleResultItemSelect=function(e,t,n){var a,i=this,s=this.props,o=s.adapter,r=s.isMulti,l=s.onResultItemSelect,c=s.label,h=s.l10n,d=this.state.searchTerm;return null===(a=o.onItemSelection)||void 0===a?void 0:a.call(o,t).then((function(t){r?i.setState({activeSuggestion:-1}):i.setState({activeSuggestion:-1,searchTerm:e,showResults:!1}),l(e,t);var a=n?E(n)-1:0;r&&(0,u.P)(h.formatText("typeahead.announceResults.itemSelected",e)+"\n             "+h.formatText("typeahead.announceResults.showingResults",c,a,d)),r||(setTimeout((function(){(0,u.P)(h.formatText("typeahead.announceResults.itemSelected",e)+" \n            "+h.formatText("typeahead.announceResults.menuClosed"))}),100),i.onDismiss(),i.menuClosed())})).catch((function(){i.updateResults(e,!0,""!==e)}))},t.prototype.handleAnnounceResults=function(e){var t=this;this.typingTimeout&&clearTimeout(this.typingTimeout),(null==e?void 0:e.length)>0&&(this.typingTimeout=setTimeout((function(){t.announceResults(e)}),1e3))},t.prototype.handleKeyPress=function(e){var t=this.state,n=t.activeSuggestion,a=t.searchTerm,i=this.props,s=i.value,o=i.l10n;this.keyPressed=!0;var r=C(this.getResultsToShow(),Array.isArray(s)?s:[]),l=r&&E(r);this.keyPressed=!0;var c=a&&a.split("");if(c){var h="'"+c.join("' , '")+" '";""!==a&&l>0&&(0,u.P)(o.formatText("typeahead.announceResults.resultsAvailable",h,l))}if("Enter"!==e.key&&38!==e.keyCode||e.preventDefault(),"Enter"===e.key){var d=D(r,n);d?this.handleResultItemSelect(d.value,d.data,r):this.handleResultItemSelect(a,void 0,r)}},t.prototype.handleChange=function(e){var t=this.props.onInputChange;this.setState({searchTerm:e.target.value,showResults:!0},this.focusInput),""===e.target.value&&this.resetActiveSuggestion(),t&&t(e)},t.prototype.handleActiveSuggestion=function(e){var t=this.state,n=t.activeSuggestion,a=t.results,i=t.searchTerm,s=this.props.allowExactMatch&&i?1:0,o=a.length+s,r=0;e===te.UP?r=-1===n?o:o-1:e===te.DOWN&&(r=o+1);var l=(n+r)%o,u=(this.newAttr+r)%o;this.setState({activeSuggestion:this.newAttr>-1?u:l}),this.newAttr=-1},t.prototype.handleUpArrowKey=function(e){38===e.keyCode&&this.handleActiveSuggestion(te.UP)},t.prototype.handleDownArrowKey=function(e){40===e.keyCode&&(this.keyPressed=!0,this.handleActiveSuggestion(te.DOWN))},t.prototype.handleTabKey=function(e){if(9===e.keyCode||e.shiftKey&&9===e.keyCode){var t=e.target.parentElement.getAttribute("data-index");this.newAttr=t?Number(t):-1}},t.prototype.handleEscKey=function(e){27===e.keyCode&&this.onDismiss()},t.prototype.handleKeyDown=function(e){this.handleDownArrowKey(e),this.handleUpArrowKey(e),this.handleEscKey(e)},t.prototype.handleKeyUp=function(e){this.handleTabKey(e)},t.prototype.onDismiss=function(){var e=this.props,t=e.isMulti,n=e.onDismiss,a=e.l10n;this.keyPressed=!1,this.resultsDomRef.current&&(this.resultsDomRef.current.scrollTop=0),n&&n(),t&&(0,u.P)(a.formatText("typeahead.announceResults.menuClosed"))},t.prototype.getResultsToShow=function(){var e=this.props.categorize,t=this.state,n=t.categorizedResults,a=t.results;return e||n&&n.length?{items:n,type:"categorized"}:{items:a,type:"uncategorized"}},t.getDerivedStateFromProps=function(e,t){var n=e.term===t.searchTerm||e.dialog?t.searchTerm:e.term;return e.isMulti?null:{searchTerm:n}},t.prototype.menuClosed=function(){var e=this.props,t=e.adapter,n=e.onDismiss;t&&"function"==typeof t.logTypeaheadDismiss&&t.logTypeaheadDismiss(),n&&n(),this.resetActiveSuggestion()},t.prototype.menuOpened=function(){var e=this.props,t=e.dialog,n=e.defaultTerm,a=this.state.searchTerm;this.resultsDomRef.current&&(this.resultsDomRef.current.scrollTop=0),this.selectInput(),t||this.updateResults(!a&&n?n:a,!1,""!==a)},t.prototype.announceResults=function(e){var t=this.state.searchTerm,n=this.props,a=n.l10n,i=n.label,s=n.defaultTerm,o=t&&t.split("");if(o){var r="'"+o.join("' , '")+" '";e&&this.isTypeAheadFocused()&&(0,u.P)(a.formatText("typeahead.announceResults.resultsAvailable",r,e.length))}else s&&e&&this.isTypeAheadFocused()&&(0,u.P)(a.formatText("typeahead.announceResults.showingResultsDefault",i,e.length))},t.prototype.isCategorizedResult=function(e){return"heading"in e},t.prototype.updateResults=function(e,t,n){return(0,i.mG)(this,void 0,void 0,(function(){var a,s,o,r,l,u,c,h,d,p,g,m,f,y=this;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return this.lastSearchTerm=e,a=this.props,s=a.adapter,o=a.categorize,r=a.defaultTerm,""!==(d=""===e?null!=r?r:"":e)&&t?o?[4,Promise.all([s.fetchResultsCategorized(d),s.fetchRecentSearchResultsCategorized()])]:[3,2]:[3,5];case 1:return p=i.sent(),[3,4];case 2:return[4,Promise.all([s.fetchResults(d),s.fetchRecentSearchResults()])];case 3:p=i.sent(),i.label=4;case 4:return c=(f=p)[0],(h=f[1])&&h.length>0?o||this.isCategorizedResult(h[0])?u=h:l=h:o?u=c:l=c,[3,11];case 5:return o?[4,s.fetchResultsCategorized(d)]:[3,7];case 6:return u=i.sent(),[3,11];case 7:return""!==d&&n?[4,s.fetchAlternativeResults(d)]:[3,9];case 8:return(g=i.sent())&&g.length&&this.isCategorizedResult(g[0])?u=g:l=g,[3,11];case 9:return[4,s.fetchResults(d)];case 10:(g=i.sent())&&g.length&&this.isCategorizedResult(g[0])?u=g:l=g,i.label=11;case 11:return this.lastSearchTerm!==e||(l&&l.length?(s.logSuggestionShown(t||n?"":e,l),this.setState({results:l,categorizedResults:[]},(function(){y.handleAnnounceResults(l)}))):u&&u.length?(s.logSuggestionShown(t||n?"":e,u),m=u.flatMap((function(e){return e.typeaheadResults})),this.setState({categorizedResults:u,results:m},(function(){y.handleAnnounceResults(l)}))):this.setState({results:[],categorizedResults:[]})),[2]}}))}))},t.prototype.selectInput=function(){var e=this.toolbarInputRef;e&&e.current&&"function"==typeof e.current.select&&e.current.select()},t.prototype.focusInput=function(){var e=this.toolbarInputRef;e&&e.current&&"function"==typeof e.current.focus&&(0,Z.J)(this.toolbarInputRef.current)&&e.current.focus()},t.prototype.resetActiveSuggestion=function(){this.setState({activeSuggestion:-1})},t.prototype.isTypeAheadFocused=function(){return this.toolbarInputRef.current===document.activeElement},t.prototype.render=function(){var e=this.props,t=e.allowExactMatch,n=e.children,a=e.dialog,i=e.stid,o=e.label,r=e.listTitle,l=e.placeholder,u=e.handleClear,c=e.emptyResultPlaceholder,h=e.dismissButtonText,d=e.value,g=e.isMulti,m=e.clearAllText,f=e.onClearAll,y=e.onItemRemove,v=e.selectedItemHeading,T=this.state,R=T.activeSuggestion,I=T.searchTerm,S=this.getResultsToShow();return s.createElement("div",{className:oe("uitk-menu-typeahead-wrapper"),onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,title:o},s.createElement(ie.p2,{id:i&&i+"-menu",isOpen:a,onTriggerClick:this.menuOpened,onDismiss:this.menuClosed,className:oe("uitk-typeahead-menu")},s.createElement(ie.Hp,null,n),s.createElement(ie.as,{position:ie.d.LEFT},s.createElement("div",{className:oe("uitk-typeahead-input-wrapper")},s.createElement(L,{autoFocus:!0,className:oe("uitk-typeahead-input-v2"),"data-stid":i&&i+"-menu-input",domRef:this.toolbarInputRef,hasClearButton:I.length>0,hasFloatedLabel:!1,hasVisibleLabel:!1,label:o,onChange:this.handleChange,onFocus:this.handleFocus,onKeyPress:this.handleKeyPress,placeholder:l,value:I,handleClear:u,id:i})),s.createElement(Y,{typeaheadLabel:o,allowExactMatch:t,onResultItemSelect:this.handleResultItemSelect,results:S,searchTerm:I,stid:i,listTitle:r,activeSuggestion:R,emptyResultPlaceholder:c,isMulti:g,dismissButtonText:h,selectedItemHeading:v,clearAllText:m,onClearAll:f,onItemRemove:y,value:d,domRef:this.resultsDomRef}),g&&s.createElement(p.v,{justifyContent:"end",className:oe("uitk-typeahead-menu-footer")},s.createElement(p.t,null,s.createElement(se.Y,{onClick:this.onDismiss},h))))))},t.placeholder=Array(5).fill({disabled:!0,icon:"brightness_1",name:" "}),t}(s.Component),ce=function(e){var t=(0,d.useLocalization)();return s.createElement(ue,(0,i.pi)({l10n:t},e))},he=l.A.bind(h()),de="typeahead.enteringInput";!function(e){e.MENU="menu",e.DIALOG="dialog",e.ADAPTIVE="adaptive"}(le||(le={}));var pe=function(e){function t(t){var n=e.call(this,t)||this;return n.keyArray=[],n.state={dialog:!1,mounted:!1,searchTerm:"",startSearchTerm:""},t.isMulti&&!Array.isArray(t.value)&&console.warn("Use an array of values if set to isMulti"),n.typeaheadInputRef=s.createRef(),n.handleResultItemSelect=n.handleResultItemSelect.bind(n),n.dismissTypeahead=n.dismissTypeahead.bind(n),n.openTypeahead=n.openTypeahead.bind(n),n.renderDialog=n.renderDialog.bind(n),n.renderMenu=n.renderMenu.bind(n),n.handleClear=n.handleClear.bind(n),n.handleKeyPress=n.handleKeyPress.bind(n),n.focusTypeaheadInput=n.focusTypeaheadInput.bind(n),n.renderMenuTypeahead=n.renderMenuTypeahead.bind(n),n.renderDialogTypeahead=n.renderDialogTypeahead.bind(n),n.updateStartSearchTerm=n.updateStartSearchTerm.bind(n),n}return(0,i.ZT)(t,e),t.getDerivedStateFromProps=function(e,t){var n;return e.isMulti?(0,i.pi)((0,i.pi)({},t),{searchTerm:""}):e.value!==t.searchTerm?(0,i.pi)((0,i.pi)({},t),{searchTerm:null!==(n=e.value)&&void 0!==n?n:""}):null},t.prototype.componentDidMount=function(){var e=this.props,t=e.value,n=e.onMountCB,a=e.isMulti;Array.isArray(t)&&a&&this.setState({searchTerm:t.join(", ")}),this.setState({mounted:!0}),n&&n(this.typeaheadInputRef)},t.prototype.handleKeyPress=function(e,t){var n=e.keyCode||e.which,a=e.key;if(n>=65&&n<=90||n>=97&&n<=122){this.keyArray.push(a);var i=this.keyArray.join("");t===le.DIALOG&&this.updateStartSearchTerm(t,i)}},t.prototype.handleClear=function(){var e=this.props.handleClear;this.setState({searchTerm:""}),"function"==typeof e&&e()},t.prototype.handleResultItemSelect=function(e,t){var n=this.props,a=n.onUpdate,i=n.isMulti,s=n.onResultSelection;if(a&&a({term:e,data:t}),s){var o=new CustomEvent("change"),r=document.createElement("input");r.value=e,t.id&&r.setAttribute("id",t.id),r.addEventListener("change",(function(e){s(e)})),r.dispatchEvent(o)}i||(this.setState({searchTerm:e}),this.focusTypeaheadInput())},t.prototype.getAdapter=function(){var e=this.props,t=e.adapter,n=e.l10n;return t instanceof b&&t.setL10n(n),t},t.prototype.dismissTypeahead=function(e){var t=this.props.onDismiss,n=(0,Z.J)(this.typeaheadInputRef.current);"function"==typeof t&&t(e),this.setState({dialog:!1,startSearchTerm:""}),this.keyArray=[],this.typeaheadInputRef.current&&n&&this.typeaheadInputRef.current.focus()},t.prototype.updateStartSearchTerm=function(e,t){var n=this;this.setState({startSearchTerm:t},(function(){"dialog"===e&&n.openTypeahead(e)}))},t.prototype.openTypeahead=function(e){var t=this.props,n=t.adapter,a=t.onClick,i=this.state,s=i.dialog,o=i.searchTerm,r=s;e===le.MENU?r?this.dismissTypeahead(e):("function"==typeof a&&a(e),this.setState({dialog:!0}),setTimeout((function(){n.typeaheadDialogOpened(o)}))):e===le.DIALOG&&("function"==typeof a&&a(e),this.setState({dialog:!0}))},t.prototype.focusTypeaheadInput=function(){var e=this.props.l10n;(0,u.P)(e.formatText(de)),this.typeaheadInputRef.current&&this.typeaheadInputRef.current.focus()},t.prototype.renderMenu=function(){var e=this,t=this.props,n=t.allowExactMatch,a=t.label,o=t.listTitle,r=t.categorize,l=t.onInputChange,u=t.stid,c=t.typeaheadPlaceholder,h=t.typeaheadEmptyResultPlaceholder,d=t.value,p=t.isMulti,g=void 0!==p&&p,m=t.customTrigger,f=t.children,y=t.dismissButtonText,v=t.clearAllText,T=t.handleClear,R=t.onItemRemove,I=t.selectedItemHeading,S=t.l10n,A=t.defaultTerm,b=t.debounceRate,E={onDismiss:function(){e.dismissTypeahead("menu")}},C=this.state,D=C.dialog,N=C.searchTerm,L=this.getAdapter();return r&&L.setTypeaheadCategories(),s.createElement(ce,(0,i.pi)({},E,{isMulti:g,value:d,label:a,adapter:L,dialog:m&&m.showTypeahead||D,allowExactMatch:n,onInputChange:l,onResultItemSelect:this.handleResultItemSelect,stid:u,term:null!=N?N:A,placeholder:c,emptyResultPlaceholder:h,listTitle:o,categorize:r,handleClear:this.handleClear,clearAllText:v,onClearAll:T,dismissButtonText:null!=y?y:S.formatText("typeahead.multiselect.dismiss"),onItemRemove:R,selectedItemHeading:I,defaultTerm:A,debounceRate:b}),m?f:this.renderTrigger(le.MENU))},t.prototype.renderDialog=function(){var e=this,t=this.props,n=t.allowExactMatch,a=t.id,o=t.label,r=t.listTitle,l=t.categorize,u=t.onInputChange,c=t.stid,h=t.typeaheadPlaceholder,d=t.typeaheadEmptyResultPlaceholder,p=t.customTrigger,g=t.defaultTerm,m=t.isMulti,f=void 0!==m&&m,y=t.clearAllText,v=t.handleClear,T=t.dismissButtonText,R=t.selectedItemHeading,I=t.onItemRemove,S=t.value,A=t.l10n,b=t.debounceRate,E=t.strictFullscreen,C=this.state,D=C.dialog,N=C.searchTerm,L=C.startSearchTerm,w=this.getAdapter();l&&w.setTypeaheadCategories();var O={onDismiss:function(){e.dismissTypeahead(le.DIALOG)}};return s.createElement(ae,(0,i.pi)({adapter:w,allowExactMatch:n,dialog:p&&p.showTypeahead||D,id:a,label:o},O,{onInputChange:u,onResultItemSelect:this.handleResultItemSelect,term:N,startSearchTerm:L,stid:c,placeholder:h,emptyResultPlaceholder:d,listTitle:r,categorize:l,handleClear:this.handleClear,defaultTerm:g,isMulti:f,clearAllText:y,onClearAll:v,dismissButtonText:null!=T?T:A.formatText("typeahead.multiselect.dismiss"),onItemRemove:I,selectedItemHeading:R,value:S,debounceRate:b,strictFullscreen:E}))},t.prototype.renderTrigger=function(e){var n,a=this,i=this.props,o=i.accessibilityLabel,r=i.analytics,l=i.icon,u=i.hasClearButton,c=i.hasVisibleLabel,h=i.invalid,d=i.label,p=i.name,g=i.placeholder,m=i.stid,f=i.customTrigger,y=i.children,v=i.isMulti,T=i.value,R=i.required,I=this.state,S=I.mounted,A=I.searchTerm,b=o||d;n=""===A?g?b+" "+g:""+b:b+" "+A;var E="menu"===e?F.w:L;return f?y:s.createElement("div",null,S&&s.createElement(Q.o,{"aria-label":n,icon:l,label:d,hasClearButton:u,handleClear:this.handleClear,"aria-describedby":h&&m?m+"-input-error":void 0,"data-stid":m&&e===le.MENU?m+"-menu-trigger":m&&"dialog"===e?m+"-dialog-trigger":"",domRef:this.typeaheadInputRef,onClick:function(){a.openTypeahead(e)},onKeyPress:function(t){a.handleKeyPress(t,e)},onClickCapture:r&&j.E.bind(this,r,""),placeholder:g,value:v?T.join(", "):T,invalid:h}),s.createElement(E,{className:he({"is-hidden":S}),"data-stid":m&&m+"-input",domRef:this.typeaheadInputRef,hasClearButton:!1,hasVisibleLabel:c,name:p,onChange:t.defaultProps.onInputChange,placeholder:g,value:A,id:m&&m+"-input",required:R}))},t.prototype.renderMenuTypeahead=function(){var e=this.props.renderMenu;return e?e(this.renderMenu()):this.renderMenu()},t.prototype.renderDialogTypeahead=function(){var e=this.props,t=e.renderDialog,n=e.customTrigger,a=this.state.dialog,i=n&&n.showTypeahead||a;return s.createElement(s.Fragment,null,t?a?t(this.renderDialog()):null:s.createElement("div",{className:he("uitk-dialog-layer",{"uitk-dialog-layer-responsive":i,"is-hidden":!i})},this.renderDialog()),this.renderTrigger(le.DIALOG))},t.prototype.render=function(){var e=this.props,t=e.renderType,n=e.stid,a=e.isMulti,i=e.value,o=e.onItemRemove,r=e.clearAllText,l=e.showPills,u=e.label;return s.createElement("div",{className:he("uitk-typeahead"),"data-stid":n},t===le.DIALOG?this.renderDialogTypeahead():t===le.MENU?this.renderMenuTypeahead():t===le.ADAPTIVE?s.createElement(V.Viewport,null,s.createElement(V.ViewSmall,null,this.renderDialogTypeahead()),s.createElement(V.ViewLarge,null,this.renderMenuTypeahead())):"",a&&l?s.createElement(G,{typeaheadLabel:u,hideHeading:!0,values:i,stid:n,onItemRemove:o,onClear:this.handleClear,clearAllText:r,className:he("uitk-spacing-margin-blockstart-three")}):null)},t.displayName="UitkTypeahead",t.defaultProps={hasClearButton:!1,onInputChange:function(){return null},renderType:le.ADAPTIVE,isMulti:!1},t}(s.Component),ge=s.forwardRef((function(e,t){var n=(0,d.useLocalization)();return s.createElement(pe,(0,i.pi)({l10n:n,ref:t},e))}))}}]);
//# sourceMappingURL=uitk-typeahead.81066882396dc0bb9eb7.js.map